The stack is in the switchable wram area. This is most annoying.


DeterminePaletteID (1c:5f97)
	Given a pokemon/trainer in A, it returns the appropriate palette.
	DeterminePaletteID_NoStatusCheck (as I call it) is usually preferable.

f:6fb8: battle initialization function.

1c:5ddf: Called from GoPAL_SET.
	It accepts a "command" in b. It jumps to index b in a table at 5F73. Values:
		00 = Set black palettes at beginning of battle
		01 = Set proper palettes for pokemon/trainers in battle
		02 = Map
		03 = Pokemon status
		04 = Show pokedex data
		05 = Slots
		06 = Set titlescreen palettes
		07 = Intro pokemon battle
		08 = Open pokedex / Name Entry
		09 = Load maps
		0A = Load pokemon menu
		0B = Evolution / Hall of Fame
		0C = Initialization
		0D = Trainer card
		FC = Called 6 times when loading pokemon menu (before 0A).
		FF = Use code [cf1c] instead. Useful for reloading after a menu clears something.

	To this I have added:
		0E = Clear colors after the titlescreen
		0F = Name entry (instead of 08)

1c:5fb6: For code FC. Determines lifebar color for one of 6 pokemon.

1c:616d = Unused GBC Code?

0f:60df = function where lifebar is moved down. Returns when finished.
03:7a1d = Function where lifebar is decreased.

1c:4b5d = Flashing palette before battle

1e:4e11 = growl / screen shake function. There's a problem, present in the original, where it updates winX/winY in the middle of rendering. Not a huge deal though.

attack data copied to $cfd2

Func_78e23 modifies palettes when attacking (when in SGB Mode) so sprites are just black and white. Because this isn't a super gameboy this limitation is unnecessary.

1e:5d77 = function to load sprite on top of player/pokemon image? (For paralysis)
	I think it's actually the paralysis animation function.

Sprite Loaders:
	1c:492a
	1e:7de9 (not really)
	More are not visible through the disassembly

=== RAM LOCATIONS ===

cf1b = SGB flag (for various reasons I leave it set in GBC mode)

TODO

- Color of pokeballs with status conditions
- Test things without the gen II patch
- Paralysis wrecks other pokemon's palette
- Fix item menu scroll glitches
- Sprites changing color after events (old man in viridian?)
- Cave entrance near Lavender is a bit weird?
- Fix VBA glitches
- When using an item in the overworld, there's still a problem with palettes sometimes?
- Color of the fuzz at the bottom of the titlescreen
- When switching pokemon, for a split second their lifebar colors are wrong
- Extraneous line on pokemon status screen (gen II patch)

POKEMON YELLOW:

1c:6af9 = location of pokemon yellow's palette data (at least for GBC Mode)
