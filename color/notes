The stack is in the switchable wram area. This is most annoying.


DeterminePaletteID (1c:5f97)
	Given a pokemon/trainer in A, it returns the appropriate palette.
	DeterminePaletteID_NoStatusCheck (as I call it) is usually preferable.

f:6fb8: battle initialization function.

1c:5ddf: Called from GoPAL_SET.
	It accepts a "command" in b. It jumps to index b in a table at 5F73. Values:
		00 = Set black palettes at beginning of battle
		01 = Set proper palettes for pokemon/trainers in battle
		02 = Map
		03 = Pokemon status
		04 = Show pokedex data
		05 = Slots
		06 = Set titlescreen palettes
		07 = Intro pokemon battle
		08 = Open pokedex
		09 = Load maps
		0A = Load pokemon menu
		0B = Evolution / Hall of Fame
		0C = Initialization
		0D = Trainer card
		FC = Called 6 times when loading pokemon menu (before 0A).
		FF = Use code [cf1c] instead. Useful for reloading after a menu clears something.

	To this I have added:
		0E = Clear colors after the titlescreen

1c:5fb6: For code FC. Determines lifebar color for one of 6 pokemon.

1c:616d = Unused GBC Code?

0f:60df = function where lifebar is moved down. Returns when finished.
03:7a1d = Function where lifebar is decreased.

1c:4b5d = Flashing palette before battle

1e:4e11 = growl / screen shake function. There's a problem, present in the original, where it updates winX/winY in the middle of rendering. Not a huge deal though.

attack data copied to $cfd2

Func_78e23 modifies palettes when attacking (when in SGB Mode) so sprites are just black and white. Because this isn't a super gameboy this limitation is unnecessary.

Locations where FF68 is set to black/white only: (bank 1e)
	- 5c7a, !5c87, 416a, !4176 (for Razor Leaf)
	- 416a (release from pokeball)
	- !4176 (revert after pokeball)
	- 4e23 (ish)

=== RAM LOCATIONS ===

cf1b = SGB flag

TODO

- Fix item menu scroll glitches
- Intro colors (prof oak speech)
- Dynamic lifebar colors
- Weird colored tables in (which city?)
- Change box: pokeball colors
- Wrap up attacks
 - Ice Beam
- Slots
- Exclamation marks
- Cave entrance
- Fix VBA glitches
- Pokedex blue square
- Revamped sprites from Gen II graphics patch
- Nidorino/Gengar in the intro
- Split-second incorrect palettes when exiting from pokemon menu to in-battle

POKEMON YELLOW:

1c:6af9 = location of pokemon yellow's palette data (at least for GBC Mode)
